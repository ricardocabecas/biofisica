theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio óbitos/casos")
##############################racio casos/testes pcr##############################
factor=c(rep("racio casos/pcr",length(amostras$data)))
dt_racio_testes=c(confirmados_novos_7_dias/amostras_pcr_novos_7_dias)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_racio_testes=data.frame(factor,dt_racio_testes,amostras$data)
names(df_racio_testes)=c("factor","dados","data")
ggplot(data = df_racio_testes, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-01-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio casos/testes pcr")
##############################racio casos/testes ag##############################
factor=c(rep("racio casos/pcr",length(amostras$data)))
dt_racio_testes=c(confirmados_novos_7_dias/amostras_ag_novos_7_dias)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_racio_testes=data.frame(factor,dt_racio_testes,amostras$data)
names(df_racio_testes)=c("factor","dados","data")
ggplot(data = df_racio_testes, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2021-02-01","2021-11-30")))+
scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio casos/testes pcr")
##############################casos - comparação anos##############################
#confirmados_novos_7_dias=forecast::ma(data$confirmados_novos,7)
factor=c(rep("diários",length(data$confirmados)))
dt_anos=c(data$confirmados_novos)
df_anos=data.frame(factor,dt_anos,as.Date(data$data, "%d-%m-%Y"))
names(df_anos)=c("factor","dados","data")
df_anos <- transform( df_anos,
Year = format(data, '%Y'),
DayOfYear = as.numeric( format(data, '%j')),
GasDiff = c(diff( dados ),NA))
ggplot(data = df_anos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("Casos Covid") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos casos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) +
geom_line( aes(colour = Year) ) +
labs(title="Novos casos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) + geom_line( )  + facet_grid(Year ~ .)
##############################obitos - comparação anos##############################
#confirmados_novos_7_dias=forecast::ma(data$confirmados_novos,7)
factor=c(rep("diários",length(data$confirmados)))
dt_anos=c(obitos_novos)
df_anos=data.frame(factor,dt_anos,as.Date(data$data, "%d-%m-%Y"))
names(df_anos)=c("factor","dados","data")
df_anos <- transform( df_anos,
Year = format(data, '%Y'),
DayOfYear = as.numeric( format(data, '%j')),
GasDiff = c(diff( dados ),NA))
ggplot(data = df_anos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("Casos Covid") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Óbitos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) +
geom_line( aes(colour = Year) )  +
labs(title="Óbitos por dia - por anos")
#geom_point( aes(shape = Year))
ggplot(df_anos, aes(DayOfYear, dados)) + geom_line( )  + facet_grid(Year ~ .)
##############################vacinas##############################
factor=c(rep("vacinas",length(vacinas$vacinas_novas)))
dt_vacinas=c(vacinas$vacinas_novas)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_vacinas=data.frame(factor,dt_vacinas,vacinas$data)
names(df_vacinas)=c("factor","dados","data")
ggplot(data = df_vacinas, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-12-01","2021-11-30")))+
#scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Vacinas")
##############################vacinas e casos##############################
xx=merge(data,vacinas,by="data")
factor=c(rep("vacinas",length(xx$vacinas_novas)),rep("casos",length(xx$confirmados_novos)))
dt_vacinas_casos=c(xx$vacinas_novas/max(xx$vacinas_novas,na.rm = TRUE),xx$confirmados_novos/max(xx$confirmados_novos))
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_vacinas_casos=data.frame(factor,dt_vacinas_casos,xx$data)
names(df_vacinas_casos)=c("factor","dados","data")
ggplot(data = df_vacinas_casos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-12-01","2021-11-30")))+
#scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Vacinas")
mean(60,62,67,69,70,72,75,78)
sd(60,62,67,69,70,72,75,78)
sd(c(60,62,67,69,70,72,75,78))
mean(c(60,62,67,69,70,72,75,78))
d=sd(c(60,62,67,69,70,72,75,78))
x=mean(c(60,62,67,69,70,72,75,78))
(x-65)/(d/sqrt(7))
(x-65)/(d/sqrt(8))
library(readr)
library(ggplot2)
data <- read_csv("~/Documents/GitHub/covid19pt-data/data.csv")
amostras <- read_csv("~/Documents/GitHub/covid19pt-data/amostras.csv")
vacinas <- read_csv("~/Documents/GitHub/covid19pt-data/vacinas.csv")
confirmados_novos_7_dias=forecast::ma(data$confirmados_novos,7)
factor=c(rep("diários",length(data$confirmados)),rep("media 7 dias",length(data$confirmados)))
dt=c(data$confirmados_novos,confirmados_novos_7_dias)
df=data.frame(factor,dt,data$data)
names(df)=c("factor","dados","data")
ggplot(data = df, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("Casos Covid") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos casos por dia")
#####################obitos##############################
obitos_novos=0
j=1
for( i in 1:length(data$obitos)){
obitos_novos[j]=data$obitos[i+1]-data$obitos[i]
j=j+1
}
obitos_novos_7_dias=forecast::ma(obitos_novos,7)
factor=c(rep("diários",length(data$confirmados)),rep("media 7 dias",length(data$confirmados)))
dt_obitos=c(obitos_novos,obitos_novos_7_dias)
df_obitos=data.frame(factor,dt_obitos,data$data)
names(df_obitos)=c("factor","dados","data")
ggplot(data = df_obitos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("óbitos") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="óbitos por dia")
#########################testes PCR############################
amostras_pcr_novos_7_dias=forecast::ma(amostras$amostras_pcr_novas,7)
factor=c(rep("diários",length(amostras$amostras_pcr_novas)),rep("media 7 dias",length(amostras$amostras_pcr_novas)))
dt_pcr=c(amostras$amostras_pcr_novas,amostras_pcr_novos_7_dias)
df_pcr=data.frame(factor,dt_pcr,amostras$data)
names(df_pcr)=c("factor","dados","data")
ggplot(data = df_pcr, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("pcr") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos testes pcr por dia")
#########################testes antigénio############################
amostras_ag_novos_7_dias=forecast::ma(amostras$amostras_antigenio_novas,7)
factor=c(rep("diários",length(amostras$amostras_antigenio_novas)),rep("media 7 dias",length(amostras$amostras_antigenio_novas)))
dt_ag=c(amostras$amostras_antigenio_novas,amostras_ag_novos_7_dias)
df_ag=data.frame(factor,dt_ag,amostras$data)
names(df_ag)=c("factor","dados","data")
ggplot(data = df_ag, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("ag") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos testes ag por dia")
#########################testes antigénio + pcr############################
amostras_ag_pcr=amostras$amostras_antigenio_novas+amostras$amostras_pcr_novas
amostras_ag_pcr_7_dias=amostras_ag_novos_7_dias+amostras_pcr_novos_7_dias
factor=c(rep("diários",length(amostras$amostras_antigenio_novas)),rep("media 7 dias",length(amostras$amostras_antigenio_novas)))
dt_ag_pcr=c(amostras_ag_pcr,amostras_ag_pcr_7_dias)
df_ag_pcr=data.frame(factor,dt_ag_pcr,amostras$data)
names(df_ag_pcr)=c("factor","dados","data")
ggplot(data = df_ag_pcr, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("ag") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos testes ag por dia")
#########################geral############################
factor=c(rep("Casos Covid",length(amostras$data)),
rep("óbitos",length(amostras$data)),
rep("PCR",length(amostras$data)),
rep("AG",length(amostras$data)),
rep("AG+PCR",length(amostras$data)))
dt_total=c(confirmados_novos_7_dias,
obitos_novos_7_dias,
amostras_pcr_novos_7_dias,
amostras_ag_novos_7_dias,
amostras_ag_pcr_7_dias)
df_geral=data.frame(factor,dt_total,amostras$data)
names(df_geral)=c("factor","dados","data")
ggplot(data = df_geral, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="media 7 dias - óbitos, casos covid, PCR, AG, PCR+AG")
##############################racio obitos/casos##############################
factor=c(rep("racio óbitos/casos",length(data$obitos)))
dt_racio=c(obitos_novos_7_dias/confirmados_novos_7_dias)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_racio=data.frame(factor,dt_racio,data$data)
names(df_racio)=c("factor","dados","data")
ggplot(data = df_racio, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-01-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio óbitos/casos")
##############################racio casos/testes pcr##############################
factor=c(rep("racio casos/pcr",length(amostras$data)))
dt_racio_testes=c(confirmados_novos_7_dias/amostras_pcr_novos_7_dias)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_racio_testes=data.frame(factor,dt_racio_testes,amostras$data)
names(df_racio_testes)=c("factor","dados","data")
ggplot(data = df_racio_testes, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-01-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio casos/testes pcr")
##############################racio casos/testes ag##############################
factor=c(rep("racio casos/pcr",length(amostras$data)))
dt_racio_testes=c(confirmados_novos_7_dias/amostras_ag_novos_7_dias)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_racio_testes=data.frame(factor,dt_racio_testes,amostras$data)
names(df_racio_testes)=c("factor","dados","data")
ggplot(data = df_racio_testes, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2021-02-01","2021-11-30")))+
scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio casos/testes pcr")
##############################casos - comparação anos##############################
#confirmados_novos_7_dias=forecast::ma(data$confirmados_novos,7)
factor=c(rep("diários",length(data$confirmados)))
dt_anos=c(data$confirmados_novos)
df_anos=data.frame(factor,dt_anos,as.Date(data$data, "%d-%m-%Y"))
names(df_anos)=c("factor","dados","data")
df_anos <- transform( df_anos,
Year = format(data, '%Y'),
DayOfYear = as.numeric( format(data, '%j')),
GasDiff = c(diff( dados ),NA))
ggplot(data = df_anos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("Casos Covid") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos casos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) +
geom_line( aes(colour = Year) ) +
labs(title="Novos casos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) + geom_line( )  + facet_grid(Year ~ .)
##############################obitos - comparação anos##############################
#confirmados_novos_7_dias=forecast::ma(data$confirmados_novos,7)
factor=c(rep("diários",length(data$confirmados)))
dt_anos=c(obitos_novos)
df_anos=data.frame(factor,dt_anos,as.Date(data$data, "%d-%m-%Y"))
names(df_anos)=c("factor","dados","data")
df_anos <- transform( df_anos,
Year = format(data, '%Y'),
DayOfYear = as.numeric( format(data, '%j')),
GasDiff = c(diff( dados ),NA))
ggplot(data = df_anos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("Casos Covid") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Óbitos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) +
geom_line( aes(colour = Year) )  +
labs(title="Óbitos por dia - por anos")
#geom_point( aes(shape = Year))
ggplot(df_anos, aes(DayOfYear, dados)) + geom_line( )  + facet_grid(Year ~ .)
##############################vacinas##############################
factor=c(rep("vacinas",length(vacinas$vacinas_novas)))
dt_vacinas=c(vacinas$vacinas_novas)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_vacinas=data.frame(factor,dt_vacinas,vacinas$data)
names(df_vacinas)=c("factor","dados","data")
ggplot(data = df_vacinas, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-12-01","2021-11-30")))+
#scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Vacinas")
##############################vacinas e casos##############################
xx=merge(data,vacinas,by="data")
factor=c(rep("vacinas",length(xx$vacinas_novas)),rep("casos",length(xx$confirmados_novos)))
dt_vacinas_casos=c(xx$vacinas_novas/max(xx$vacinas_novas,na.rm = TRUE),xx$confirmados_novos/max(xx$confirmados_novos))
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_vacinas_casos=data.frame(factor,dt_vacinas_casos,xx$data)
names(df_vacinas_casos)=c("factor","dados","data")
ggplot(data = df_vacinas_casos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-12-01","2021-11-30")))+
#scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Vacinas")
library(readr)
library(ggplot2)
data <- read_csv("~/Documents/GitHub/covid19pt-data/data.csv")
amostras <- read_csv("~/Documents/GitHub/covid19pt-data/amostras.csv")
vacinas <- read_csv("~/Documents/GitHub/covid19pt-data/vacinas.csv")
confirmados_novos_7_dias=forecast::ma(data$confirmados_novos,7)
factor=c(rep("diários",length(data$confirmados)),rep("media 7 dias",length(data$confirmados)))
dt=c(data$confirmados_novos,confirmados_novos_7_dias)
df=data.frame(factor,dt,data$data)
names(df)=c("factor","dados","data")
ggplot(data = df, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("Casos Covid") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos casos por dia")
#####################obitos##############################
obitos_novos=0
j=1
for( i in 1:length(data$obitos)){
obitos_novos[j]=data$obitos[i+1]-data$obitos[i]
j=j+1
}
obitos_novos_7_dias=forecast::ma(obitos_novos,7)
factor=c(rep("diários",length(data$confirmados)),rep("media 7 dias",length(data$confirmados)))
dt_obitos=c(obitos_novos,obitos_novos_7_dias)
df_obitos=data.frame(factor,dt_obitos,data$data)
names(df_obitos)=c("factor","dados","data")
ggplot(data = df_obitos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("óbitos") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="óbitos por dia")
#########################testes PCR############################
amostras_pcr_novos_7_dias=forecast::ma(amostras$amostras_pcr_novas,7)
factor=c(rep("diários",length(amostras$amostras_pcr_novas)),rep("media 7 dias",length(amostras$amostras_pcr_novas)))
dt_pcr=c(amostras$amostras_pcr_novas,amostras_pcr_novos_7_dias)
df_pcr=data.frame(factor,dt_pcr,amostras$data)
names(df_pcr)=c("factor","dados","data")
ggplot(data = df_pcr, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("pcr") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos testes pcr por dia")
#########################testes antigénio############################
amostras_ag_novos_7_dias=forecast::ma(amostras$amostras_antigenio_novas,7)
factor=c(rep("diários",length(amostras$amostras_antigenio_novas)),rep("media 7 dias",length(amostras$amostras_antigenio_novas)))
dt_ag=c(amostras$amostras_antigenio_novas,amostras_ag_novos_7_dias)
df_ag=data.frame(factor,dt_ag,amostras$data)
names(df_ag)=c("factor","dados","data")
ggplot(data = df_ag, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("ag") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos testes ag por dia")
#########################testes antigénio + pcr############################
amostras_ag_pcr=amostras$amostras_antigenio_novas+amostras$amostras_pcr_novas
amostras_ag_pcr_7_dias=amostras_ag_novos_7_dias+amostras_pcr_novos_7_dias
factor=c(rep("diários",length(amostras$amostras_antigenio_novas)),rep("media 7 dias",length(amostras$amostras_antigenio_novas)))
dt_ag_pcr=c(amostras_ag_pcr,amostras_ag_pcr_7_dias)
df_ag_pcr=data.frame(factor,dt_ag_pcr,amostras$data)
names(df_ag_pcr)=c("factor","dados","data")
ggplot(data = df_ag_pcr, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("ag") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos testes ag por dia")
#########################geral############################
factor=c(rep("Casos Covid",length(amostras$data)),
rep("óbitos",length(amostras$data)),
rep("PCR",length(amostras$data)),
rep("AG",length(amostras$data)),
rep("AG+PCR",length(amostras$data)))
dt_total=c(confirmados_novos_7_dias,
obitos_novos_7_dias,
amostras_pcr_novos_7_dias,
amostras_ag_novos_7_dias,
amostras_ag_pcr_7_dias)
df_geral=data.frame(factor,dt_total,amostras$data)
names(df_geral)=c("factor","dados","data")
ggplot(data = df_geral, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="media 7 dias - óbitos, casos covid, PCR, AG, PCR+AG")
##############################racio obitos/casos##############################
factor=c(rep("racio óbitos/casos",length(data$obitos)))
dt_racio=c(obitos_novos_7_dias/confirmados_novos_7_dias)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_racio=data.frame(factor,dt_racio,data$data)
names(df_racio)=c("factor","dados","data")
ggplot(data = df_racio, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-01-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio óbitos/casos")
##############################racio casos/testes pcr##############################
factor=c(rep("racio casos/pcr",length(amostras$data)))
dt_racio_testes=c(confirmados_novos_7_dias/amostras_pcr_novos_7_dias)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_racio_testes=data.frame(factor,dt_racio_testes,amostras$data)
names(df_racio_testes)=c("factor","dados","data")
ggplot(data = df_racio_testes, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-01-01","2021-11-30")))+
geom_vline(xintercept = as.Date("2020-12-27"), color="purple")+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio casos/testes pcr")
##############################racio casos/testes ag##############################
factor=c(rep("racio casos/pcr",length(amostras$data)))
dt_racio_testes=c(confirmados_novos_7_dias/amostras_ag_novos_7_dias)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_racio_testes=data.frame(factor,dt_racio_testes,amostras$data)
names(df_racio_testes)=c("factor","dados","data")
ggplot(data = df_racio_testes, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2021-02-01","2021-11-30")))+
scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="racio casos/testes pcr")
##############################casos - comparação anos##############################
#confirmados_novos_7_dias=forecast::ma(data$confirmados_novos,7)
factor=c(rep("diários",length(data$confirmados)))
dt_anos=c(data$confirmados_novos)
df_anos=data.frame(factor,dt_anos,as.Date(data$data, "%d-%m-%Y"))
names(df_anos)=c("factor","dados","data")
df_anos <- transform( df_anos,
Year = format(data, '%Y'),
DayOfYear = as.numeric( format(data, '%j')),
GasDiff = c(diff( dados ),NA))
ggplot(data = df_anos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("Casos Covid") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Novos casos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) +
geom_line( aes(colour = Year) ) +
labs(title="Novos casos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) + geom_line( )  + facet_grid(Year ~ .)
##############################obitos - comparação anos##############################
#confirmados_novos_7_dias=forecast::ma(data$confirmados_novos,7)
factor=c(rep("diários",length(data$confirmados)))
dt_anos=c(obitos_novos)
df_anos=data.frame(factor,dt_anos,as.Date(data$data, "%d-%m-%Y"))
names(df_anos)=c("factor","dados","data")
df_anos <- transform( df_anos,
Year = format(data, '%Y'),
DayOfYear = as.numeric( format(data, '%j')),
GasDiff = c(diff( dados ),NA))
ggplot(data = df_anos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("Casos Covid") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-02-01","2021-11-30")))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Óbitos por dia")
ggplot(df_anos, aes(DayOfYear, dados)) +
geom_line( aes(colour = Year) )  +
labs(title="Óbitos por dia - por anos")
#geom_point( aes(shape = Year))
ggplot(df_anos, aes(DayOfYear, dados)) + geom_line( )  + facet_grid(Year ~ .)
##############################vacinas##############################
factor=c(rep("vacinas",length(vacinas$vacinas_novas)))
dt_vacinas=c(vacinas$vacinas_novas)
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_vacinas=data.frame(factor,dt_vacinas,vacinas$data)
names(df_vacinas)=c("factor","dados","data")
ggplot(data = df_vacinas, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-12-01","2021-11-30")))+
#scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Vacinas")
##############################vacinas e casos##############################
xx=merge(data,vacinas,by="data")
factor=c(rep("vacinas",length(xx$vacinas_novas)),rep("casos",length(xx$confirmados_novos)))
dt_vacinas_casos=c(xx$vacinas_novas/max(xx$vacinas_novas,na.rm = TRUE),xx$confirmados_novos/max(xx$confirmados_novos))
#dt_racio=c(obitos_novos/data$confirmados_novos)
df_vacinas_casos=data.frame(factor,dt_vacinas_casos,xx$data)
names(df_vacinas_casos)=c("factor","dados","data")
ggplot(data = df_vacinas_casos, aes(x=as.Date(data, "%d-%m-%Y"), y =dados, group= as.factor(factor),color=factor)) +
ylab("") +
geom_line() +
scale_x_date(name="Meses",date_breaks = "month",limits = as.Date(c("2020-12-01","2021-11-30")))+
#scale_y_continuous(limits = c(0,1))+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(title="Vacinas")
knit_with_parameters('~/Documents/R/Livro/05-hidrostatica.Rmd.Rmd')
library(kableExtra)
